@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    @apply bg-surface-base text-ink overflow-x-hidden;
    font-family: 'Crimson Text', Georgia, serif;
  }

  ::-webkit-scrollbar {
    width: 3px;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-surface-border rounded-full;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
}

@layer components {
  /* ── Typography ─────────────────────────────────────────────────────── */
  .font-display {
    font-family: 'Playfair Display', Georgia, serif;
  }

  /* ── Buttons ────────────────────────────────────────────────────────── */
  .btn-primary {
    @apply w-full bg-brand-gold text-surface-dark font-crimson font-semibold text-base
           rounded-xl px-6 py-3 border-none cursor-pointer
           transition-all duration-150 hover:bg-brand-gold-light hover:-translate-y-px
           active:translate-y-0 flex items-center justify-center gap-2;
    font-family: 'Crimson Text', serif;
  }

  .btn-ghost {
    @apply w-full bg-transparent border border-surface-border-hover text-ink-subtle
           font-crimson text-base rounded-xl px-6 py-3 cursor-pointer
           transition-all duration-150 hover:border-surface-border-hover hover:text-ink-muted;
    font-family: 'Crimson Text', serif;
  }

  .btn-back {
    @apply bg-transparent border border-surface-border text-ink-subtle
           rounded-xl px-4 py-2 cursor-pointer text-[15px]
           transition-all duration-150 hover:border-surface-border-hover hover:text-ink-muted
           inline-flex items-center gap-1.5;
    font-family: 'Crimson Text', serif;
  }

  .btn-icon {
    @apply bg-transparent border border-surface-border text-ink-subtle
           rounded-xl w-10 h-10 flex items-center justify-center text-lg cursor-pointer
           transition-all duration-150 hover:border-surface-border-hover hover:text-brand-gold
           hover:bg-surface-inset flex-shrink-0;
  }

  .btn-social {
    @apply w-full flex items-center justify-center gap-2.5 bg-surface-card
           border border-surface-border rounded-xl text-ink-muted text-base px-4 py-3
           cursor-pointer transition-all duration-150
           hover:border-surface-border-hover hover:bg-surface-inset hover:text-ink;
    font-family: 'Crimson Text', serif;
  }

  .btn-action {
    @apply bg-transparent border border-surface-border rounded-full text-ink-faint
           px-3.5 py-1 text-[13px] cursor-pointer transition-all duration-150
           inline-flex items-center gap-1
           hover:border-surface-border-hover hover:text-brand-gold;
    font-family: 'Crimson Text', serif;
  }

  .btn-action.liked {
    @apply bg-brand-gold/10 border-brand-gold/50 text-brand-gold;
  }

  /* ── Cards ──────────────────────────────────────────────────────────── */
  .book-card {
    @apply bg-surface-card border border-surface-border rounded-[18px] p-[18px]
           cursor-pointer relative
           transition-all duration-200
           hover:-translate-y-1 hover:shadow-[0_14px_44px_rgba(0,0,0,0.55)]
           hover:border-surface-border-hover
           active:translate-y-0;
  }

  .book-card.pinned {
    @apply border-brand-gold/30 bg-[#1a1610];
  }

  .post-card {
    @apply bg-surface-inset border border-surface-border/60 rounded-2xl p-5 mb-2.5
           transition-colors duration-150 hover:border-surface-border;
  }

  /* ── Inputs ─────────────────────────────────────────────────────────── */
  .form-input {
    @apply w-full bg-surface-card border border-surface-border rounded-xl
           text-ink text-base px-4 py-3 outline-none
           transition-all duration-150
           focus:border-brand-gold/60 focus:ring-2 focus:ring-brand-gold/10
           placeholder:text-ink-faint;
    font-family: 'Crimson Text', serif;
  }

  .search-input {
    @apply form-input pl-[46px] pr-10;
  }

  /* ── Compose ────────────────────────────────────────────────────────── */
  .compose-box {
    @apply bg-surface-inset border border-surface-border rounded-[18px] p-5 mb-6
           transition-colors duration-150 focus-within:border-surface-border-hover;
  }

  .compose-textarea {
    @apply w-full bg-transparent border-none outline-none text-ink text-base
           leading-relaxed resize-none placeholder:text-ink-ghost;
    font-family: 'Crimson Text', serif;
  }

  /* ── Pill / badge ───────────────────────────────────────────────────── */
  .pill {
    @apply inline-block text-[11px] font-semibold tracking-wide uppercase
           px-2.5 py-0.5 rounded-full;
    font-family: 'Crimson Text', serif;
    letter-spacing: 0.8px;
  }

  /* ── Avatar ─────────────────────────────────────────────────────────── */
  .avatar {
    @apply w-9 h-9 rounded-full flex items-center justify-center
           text-[13px] font-bold text-ink flex-shrink-0;
    font-family: 'Playfair Display', serif;
  }

  /* ── Progress bar ───────────────────────────────────────────────────── */
  .progress-track {
    @apply bg-surface-border rounded-full h-1 overflow-hidden;
  }

  .progress-fill {
    @apply h-full rounded-full transition-all duration-500;
  }

  /* ── Locked / gate ──────────────────────────────────────────────────── */
  .locked-card {
    @apply border border-dashed border-surface-border rounded-2xl p-8 text-center mt-2;
  }

  .discussion-gate {
    @apply bg-surface-inset border border-surface-border rounded-[20px] p-8 text-center;
  }

  /* ── Modal ──────────────────────────────────────────────────────────── */
  .modal-overlay {
    @apply fixed inset-0 bg-black/70 flex items-center justify-center
           z-50 backdrop-blur-md animate-fade-in;
  }

  .modal-box {
    @apply bg-[#181410] border border-surface-border-hover rounded-[22px] p-9
           w-[90%] max-w-sm shadow-[0_32px_80px_rgba(0,0,0,0.65)] animate-pop-in;
  }

  /* ── Settings drawer ─────────────────────────────────────────────────── */
  .drawer-overlay {
    @apply fixed inset-0 bg-black/60 z-40 backdrop-blur-md animate-fade-in;
  }

  .drawer {
    @apply fixed top-0 right-0 bottom-0 w-[min(320px,90vw)]
           bg-[#141210] border-l border-surface-border
           z-50 animate-slide-right flex flex-col;
  }

  /* ── Range slider ────────────────────────────────────────────────────── */
  .range-slider {
    @apply w-full h-1 rounded-full bg-surface-border outline-none cursor-pointer appearance-none;
  }
  .range-slider::-webkit-slider-thumb {
    @apply appearance-none w-5 h-5 rounded-full bg-brand-gold cursor-pointer
           shadow-[0_2px_12px_rgba(200,160,72,0.5)];
  }

  /* ── Onboarding dot ──────────────────────────────────────────────────── */
  .ob-dot {
    @apply h-1.5 rounded-full bg-surface-border-hover transition-all duration-300;
    width: 7px;
  }
  .ob-dot.active {
    @apply bg-brand-gold;
    width: 22px;
  }

  /* ── Update pill ─────────────────────────────────────────────────────── */
  .update-pill {
    @apply flex items-center gap-1.5 bg-surface-card border border-surface-border
           rounded-full px-3.5 py-1.5 cursor-pointer
           transition-all duration-150 text-[14px] text-ink-subtle
           hover:border-surface-border-hover hover:bg-surface-inset hover:text-ink-muted;
    font-family: 'Crimson Text', serif;
  }

  /* ── Section label ───────────────────────────────────────────────────── */
  .section-label {
    @apply text-[12px] tracking-widest uppercase text-ink-faint mb-2.5 flex items-center gap-2;
    font-family: 'Crimson Text', serif;
  }
  .section-label::after {
    content: '';
    @apply flex-1 h-px bg-surface-border/60;
  }

  /* ── Reveal button ───────────────────────────────────────────────────── */
  .btn-reveal {
    @apply inline-flex items-center gap-2 mt-5 px-8 py-3
           border-none rounded-xl cursor-pointer font-semibold text-base text-surface-dark
           transition-all duration-150 hover:opacity-90 hover:-translate-y-px active:translate-y-0;
    font-family: 'Crimson Text', serif;
    background: linear-gradient(135deg, #c8a048, #9a7830);
  }

  /* ── Splash ring ─────────────────────────────────────────────────────── */
  .splash-ring {
    @apply absolute rounded-full border border-brand-gold/10 animate-fade-in;
  }
}
